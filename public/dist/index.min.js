const BASE=window.location.href,delay=e=>new Promise(t=>setTimeout(t,e));function zoom(e){let t=document.querySelector("main");document.querySelectorAll(".lens").forEach(t=>{t.style.width=`${e.target.value/3}px`}),t.style.gridTemplateColumns=`repeat(auto-fit, minmax(${e.target.value}px, ${e.target.value}px))`}function dragOverHandler(e){"drop_zone"==e.target.id&&e.target.setAttribute("class","hover"),e.preventDefault()}function dropHandler(e){e.preventDefault(),"drop_zone"==e.target.id&&e.target.setAttribute("class",""),handleFiles(e.dataTransfer.files)}async function handleFiles(e){for(let t=0;t<e.length;t++)await uploadFile(e[t]);location.reload()}async function uploadFile(e){let t;return await fetch(`${BASE}/upload?file=${e.name}`,{method:"POST",body:await e.text(),mode:"no-cors",headers:{Accept:"text/plain","Content-Type":"text/plain","Access-Control-Allow-Origin":"*"}})}function openDialog(){let e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("multiple","true"),e.addEventListener("change",async e=>{await handleFiles(e.target.files)}),e.click()}function download(e,t){var a=document.createElement("a");return a.download=t,a.setAttribute("href",e),a.click(),!1}function remove_item(e){let t=e.target;do t=t.parentNode;while(!t.classList.contains("item-container"));fetch(`${BASE}/delete?file=${e.target.id}`,{method:"GET",mode:"no-cors",headers:{Accept:"text/plain","Content-Type":"text/plain","Access-Control-Allow-Origin":"*"}}).then(e=>{t.classList.add("hide"),setTimeout(()=>t.remove(),200)})}function download_file(e,t){let a=e.target.id.split(".")[0];download(`${BASE}/download/${t}/${a}.${t}?id=0`,a+`.${t}`)}